{"version":3,"sources":["all.js"],"names":["API","data","fetch","then","response","json","error","console","log","lists","filteredLists","form","document","querySelector","input","resetBtn","searchInfo","info","order","type","table","advanceSort","currentType","undefined","currentOrder","currentSearch","typeSearched","isDescending","init","render","changeOrder","orderName","filterLists","sort","a","b","createSearchInfo","dataType","dataOrder","dataNumber","showData","newTable","forEach","item","作物名稱","市場名稱","上價","中價","下價","平均量","交易量","innerHTML","length"],"mappings":"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","file":"all.js","sourcesContent":["\n//搜尋(currentSearch)、排序(currentOrder)、種類(currentType)之間的交叉搜尋\n//清除查詢按鈕 (resetBtn)\n//搜尋結果現況展示 (info)\n// 抓取資料上 - 採用原生語法 fetch。 Async / Await 做非同步處裡。\n\n// data\nconst API = 'https://hexschool.github.io/js-filter-data/data.json';\nlet data = fetch(API)\n            .then(response => response.json())\n            //.then(data => console.log(data))\n            .catch(error => console.log(error))\nlet lists = [];\nlet filteredLists = [];\n\n// DOM Element\nconst form = document.querySelector('[data-priceNet-form]'); //讀取文字的方式綁定\nconst input = document.querySelector('[data-priceNet-input]'); \nconst resetBtn = document.querySelector('[data-priceNet-reset]'); \nconst searchInfo = document.querySelector('[data-priceNet-searchInfo]'); \nconst info = document.querySelector('[data-priceNet-info]'); \nconst order = document.querySelector('[data-priceNet-order]'); \nconst type = document.querySelector('[data-priceNet-type]'); \nconst table = document.querySelector('[data-priceNet-table]'); \nconst advanceSort = document.querySelector('[data-priceNet-advanceSort]'); \n\n// State\nlet currentType = undefined;\nlet currentOrder = undefined;\nlet currentSearch = '';\nlet typeSearched = false;\nlet isDescending = false;\n\n// 初始化\nasync function init() {\n  lists = await data\n  filteredLists = lists\n  render()\n}\n\n// 排序\nfunction changeOrder(orderName, isDescending){\n  if(isDescending){\n      filterLists.sort((a, b) => b[orderName] - a[orderName])\n      currentOrder = `${orderName}降序`\n  }\n  if(!isDescending){\n    currentOrder = `${orderName}升序`\n    filterLists.sort((a, b) => a[orderName] - b[orderName])\n  }\n  render(filterLists, currentType, currentOrder)\n}\n\nfunction createSearchInfo(dataType, dataOrder, dataNumber){\n  if(!currentSearch){\n    return currentSearch = '無搜尋';\n  }else{\n    return `\n    一共有<span class=\"\">${dataNumber}</span> 筆資料<br>(<span>${dataType} + ${dataOrder} + ${currentSearch}</span>)\n    `\n  }\n}\n\nfunction render(showData = lists, dataType=\"不分類\", dataOrder=\"無排序\"){\n// render\n  let newTable = [];\n  showData.forEach((item)=>{\n    newTable += `\n      <tr class=\"\">\n        <td class=\"p-2\">${item.作物名稱}</td>\n        <td class=\"p-2\">${item.市場名稱}</td>\n        <td class=\"p-2\">${item.上價}</td>\n        <td class=\"p-2\">${item.中價}</td>\n        <td class=\"p-2\">${item.下價}</td>\n        <td class=\"p-2\">${item.平均量}</td>\n        <td class=\"p-2\">${item.交易量}</td>\n      </tr>\n    `\n  })\n//display\n  table.innerHTML = newTable;\n  searchInfo.innerHTML = createSearchInfo(dataType, dataOrder, showData.length);\n}\n\ninit();\nrender();"]}